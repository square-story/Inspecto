{retryPayment && (
                <Dialog open={!!retryPayment} onOpenChange={(open) => !open && setRetryPayment(null)}>
                    <DialogContent className="sm:max-w-md">
                        <DialogHeader>
                            <DialogTitle>Retry Payment</DialogTitle>
                            <DialogDescription>
                                Please complete your payment to confirm your inspection appointment.
                            </DialogDescription>
                        </DialogHeader>
                        <StripePaymentWrapper
                            amount={retryPayment.amount}
                            inspectionId={retryPayment.inspection._id}
                            onPaymentSuccess={handleRetrySuccess}
                            onPaymentError={handleRetryError}
                            isRetry={true}
                            paymentIntentId={retryPayment.stripePaymentIntentId}
                        />
                    </DialogContent>
                </Dialog>
            )}